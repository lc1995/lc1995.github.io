<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Game,Artificial Intelligence," />










<meta name="description" content="This is the reading note after reading  by Mat Buckland. Here is the part of the Chapter 5.">
<meta name="keywords" content="Game,Artificial Intelligence">
<meta property="og:type" content="article">
<meta property="og:title" content="Game Ai Chapter 5">
<meta property="og:url" content="http://lc1995.github.io/2018/04/05/Game-Ai-Chapter-5/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="This is the reading note after reading  by Mat Buckland. Here is the part of the Chapter 5.">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://lc1995.github.io/images/NavigationGraph.png">
<meta property="og:image" content="http://lc1995.github.io/images/DependencyGraph.png">
<meta property="og:updated_time" content="2018-04-06T23:13:35.109Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Game Ai Chapter 5">
<meta name="twitter:description" content="This is the reading note after reading  by Mat Buckland. Here is the part of the Chapter 5.">
<meta name="twitter:image" content="http://lc1995.github.io/images/NavigationGraph.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lc1995.github.io/2018/04/05/Game-Ai-Chapter-5/"/>





  <title>Game Ai Chapter 5 | Hexo</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://lc1995.github.io/2018/04/05/Game-Ai-Chapter-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chang Lin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Game Ai Chapter 5</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-05T05:11:27+08:00">
                2018-04-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index">
                    <span itemprop="name">AI</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/04/05/Game-Ai-Chapter-5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/2018/04/05/Game-Ai-Chapter-5/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>This is the reading note after reading <programming game="" ai="" by="" example=""> by Mat Buckland.</programming></p>
<p>Here is the part of the Chapter 5.</p>
<a id="more"></a>
<h1 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h1><p>Graph is commonly used in Game AI. Here I don’t give much details to what is a graph. I just give two examples about how graph is used in Game AI.</p>
<h2 id="Example-1-Navigation"><a href="#Example-1-Navigation" class="headerlink" title="Example 1 : Navigation"></a>Example 1 : Navigation</h2><p>A navigation graph, or navgraph, is an abstraction of all the locations in a game environment the game agents may visit and of all the connections between those points. Consequently, a well-designed navgraph is a data structure embodying all the possible paths through the game environment and is therefore extremely handy for helping your game agents decide how to get from A to B.</p>
<p>Each node in a navgraph usually represents the position of a key area or object within the environment and each edge represents the connections between those points. Furthermore, each edge will have an associated cost, which in the simplest case represents the distance between the nodes it con- nects. This type of graph is known to mathematicians as a Euclidian graph.</p>
<p><img src="/images/NavigationGraph.png" alt=""></p>
<p>I’d like to make it clear that a game agent is not restricted to moving along the graph edges as though it were a train traveling along rails. An agent can move to any unobstructed position within the game environment, but it uses the navigation graph to negotiate its environment — to plan paths between two or more points and to traverse them. For example, if an agent positioned at point A finds it necessary to move to position B, it can use the navgraph to calculate the best route between the nodes closest to those points.</p>
<h2 id="Example-2-Dependency-Graph"><a href="#Example-2-Dependency-Graph" class="headerlink" title="Example 2 : Dependency Graph"></a>Example 2 : Dependency Graph</h2><p>Dependency graphs are used in resource management type games to describe the dependencies between the various buildings, materials, units, and technologies available to a player.</p>
<p><img src="/images/DependencyGraph.png" alt=""></p>
<p>Dependency graphs are invaluable when designing an AI for this type of genre because the AI can use them to decide on strategies, predict the future status of an opponent, and assign resources effectively. Here are some examples based upon the graph shown in the figure.</p>
<ol>
<li>If the AI is preparing for battle and ascertains that archers are going to be advantageous, it can examine the dependency graph to conclude that before it can produce archers, it must first make sure it has a bar- racks and the technology of arrows. It also knows that in order to produce arrows it must have a lumber mill producing wood. There- fore, if the AI already has a lumber mill it can assign resources to building a barracks or vice versa. If the AI has neither a barracks nor a lumber mill it can inspect the technology graph further to determine that it’s probably advantageous to build the barracks before the lumber mill. Why? Because the barracks is a prerequisite for three different kinds of fighting unit, whereas a lumber mill is only a prerequisite for producing wood. The AI has already determined a battle is imminent, so it should realize (if you’ve designed it correctly, of course) that it should be putting resources into making fighting units as soon as pos- sible, because as we all know, knights and foot soldiers make better warriors than planks of wood!</li>
<li>If an enemy foot soldier carrying a gun comes into the AI’s territory, the AI can work backward through the graph to conclude that:</li>
</ol>
<ul>
<li>The enemy must have already built a forge and a lumber mill.</li>
<li>The enemy must have developed the technology of gunpowder.</li>
<li>The enemy must be producing the resources of wood and iron.</li>
</ul>
<p>Further examination of the graph would indicate that the enemy probably either has cannons or is currently building them. Nasty!</p>
<p>The AI can use this information to decide on the best plan of attack. For example, the AI would know that to prevent any more gun-toting enemies from reaching its territory, it should target the enemy’s forge and lumber mill. It can also infer that sending an assas- sin to hit the enemy blacksmith would weaken its foe considerably, and perhaps devote resources toward creating an assassin for this purpose.</p>
<ol>
<li>Often, a technology or specific unit is key to a team winning a game. If the costs of building each resource are assigned to the dependency graph’s edges, then the AI can use this information to calculate the most efficient route to produce that resource</li>
</ol>
<h1 id="Graph-Search"><a href="#Graph-Search" class="headerlink" title="Graph Search"></a>Graph Search</h1><p>The following algorithms is about graph search. Graph search means given a source node and a target node, how we can find a path with minimum cost from the source to the destination.</p>
<h2 id="Depth-First-Search"><a href="#Depth-First-Search" class="headerlink" title="Depth First Search"></a>Depth First Search</h2><p>The depth first search is so named because it searches by moving as deep into the graph as possible. When it hits a dead end it backtracks to a shallower node where it can continue its exploration. </p>
<p><strong>Pseudocode</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1  procedure DFS(G,v):</span><br><span class="line">2      label v as discovered</span><br><span class="line">3      for all edges from v to w in G.adjacentEdges(v) do</span><br><span class="line">4          if vertex w is not labeled as discovered then</span><br><span class="line">5              recursively call DFS(G,w)</span><br></pre></td></tr></table></figure></p>
<p>The above pseudocode is for traversing the whole graph. If we want to use it the find a path, just start it from the source node and stop it when we reach the target node.</p>
<p>By DFS, we can always obtain the path from sourth to target if it exists one. However, we cannot get the path with minimum cost because we don’t consider cost in our algorithm and once we reach the target we stop the process and backtrack the path.</p>
<p>The time complexity is Θ(|V| + |E|), linear in the size of the graph. It’s not much efficient because as the number of nodes grows, the number of edges can be enormous. We can use it to traverse an entire graph and tells the accessibility of each node in the graph. But it’s not recommended to use it for searching a path in every frame.</p>
<p>More details can be found in <a href="https://en.wikipedia.org/wiki/Depth-first_search#Applications" target="_blank" rel="noopener">wiki</a></p>
<p>Also there is one interesting application: <a href="https://en.wikipedia.org/wiki/Maze_generation_algorithm" target="_blank" rel="noopener">Using DFS to generate a maze</a></p>
<h2 id="Breadth-First-Search"><a href="#Breadth-First-Search" class="headerlink" title="Breadth First Search"></a>Breadth First Search</h2><p>The BFS algorithm fans out from the source node and examines each of the nodes its edges lead to before fanning out from those nodes and exam- ining all the edges they connect to and so on. You can think of the search as exploring all the nodes that are one edge away from the source node, then all the nodes two edges away, then three edges, and so on until the target node is found. Therefore, as soon as the target is located, the path leading to it is guaranteed to contain the fewest edges possible.</p>
<p>**Pseudocode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">def breadth_first_search(problem):</span><br><span class="line"></span><br><span class="line">  # a FIFO open_set</span><br><span class="line">  open_set = Queue()</span><br><span class="line">  # an empty set to maintain visited nodes</span><br><span class="line">  closed_set = set()</span><br><span class="line">  # a dictionary to maintain meta information (used for path formation)</span><br><span class="line">  meta = dict()  # key -&gt; (parent state, action to reach child)</span><br><span class="line"></span><br><span class="line">  # initialize</span><br><span class="line">  root = problem.get_root()</span><br><span class="line">  meta[root] = (None, None)</span><br><span class="line">  open_set.enqueue(root)</span><br><span class="line"></span><br><span class="line">  #For each node on the current level expand and process, if no children (leaf, then unwind)</span><br><span class="line">  while not open_set.is_empty():</span><br><span class="line"></span><br><span class="line">    subtree_root = open_set.dequeue()</span><br><span class="line">    </span><br><span class="line">    #We found the node we wanted so stop and emit a path.</span><br><span class="line">    if problem.is_goal(subtree_root):</span><br><span class="line">          return construct_path(subtree_root, meta)</span><br><span class="line"></span><br><span class="line">    #For each child of the current tree process</span><br><span class="line">    for (child, action) in problem.get_successors(subtree_root):</span><br><span class="line">      </span><br><span class="line">      #The node has already been processed, so skip over it</span><br><span class="line">      if child in closed_set:</span><br><span class="line">        continue</span><br><span class="line">      </span><br><span class="line">      #The child is not enqueued to be processed, so enqueue this level of children to be expanded</span><br><span class="line">      if child not in open_set:</span><br><span class="line">        #create metadata for these nodes</span><br><span class="line">        meta[child] = (subtree_root, action)</span><br><span class="line">        #enqueue these nodes</span><br><span class="line">        open_set.enqueue(child)</span><br><span class="line">    </span><br><span class="line">    #We finished processing the root of this subtree, so add it to the closed set</span><br><span class="line">    closed_set.add(subtree_root)</span><br><span class="line"></span><br><span class="line">#Produce a backtrace of the actions taken to find the goal node, using the recorded meta dictionary</span><br><span class="line">def construct_path(state, meta):</span><br><span class="line">  action_list = list()</span><br><span class="line">  </span><br><span class="line">  while True:</span><br><span class="line">    row = meta[state]</span><br><span class="line">    if len(row) == 2:</span><br><span class="line">      state = row[0]</span><br><span class="line">      action = row[1]</span><br><span class="line">      action_list.append(action)</span><br><span class="line">    else:</span><br><span class="line">      break</span><br><span class="line">  </span><br><span class="line">  action_list.reverse()</span><br><span class="line">  return action_list</span><br></pre></td></tr></table></figure></p>
<p>The time complexity can be expressed as {\displaystyle O(|V|+|E|)} O(|V|+|E|), since every vertex and every edge will be explored in the worst case. Like DFS, it’s not efficient in searching a path, or in small search space.</p>
<p>In BFS, we treat all edges as one-cost edge. Therefore we can only obtain the shortest path if that’s real(all edges with same cost).</p>
<p>Also, the path shape is entirely dependent on the order in which each node’s edges are explored.</p>
<p>More details can be found in <a href="https://en.wikipedia.org/wiki/Breadth-first_search" target="_blank" rel="noopener">wiki</a></p>
<h2 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h2><p>Dijkstra algorithm allows us to find the shortest path in weighted graph in high efficiency.</p>
<p>Dijkstra’s algorithm builds a shortest path tree one edge at a time by first adding the source node to the SPT and then by adding the edge that gives the shortest path from the source to a node not already on the SPT. This process results in an SPT containing the shortest path from every node in the graph to the source node. If the algorithm is supplied with a target node, the process will terminate as soon as it is found. At the point the algorithm terminates, the SPT it has generated will contain the shortest path to the source node from the target node, and from every node visited during the search.</p>
<p><strong>Pseudocode</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> 1  function Dijkstra(Graph, source):</span><br><span class="line"> 2</span><br><span class="line"> 3      create vertex set Q</span><br><span class="line"> 4</span><br><span class="line"> 5      for each vertex v in Graph:             // Initialization</span><br><span class="line"> 6          dist[v] ← INFINITY                  // Unknown distance from source to v</span><br><span class="line"> 7          prev[v] ← UNDEFINED                 // Previous node in optimal path from source</span><br><span class="line"> 8          add v to Q                          // All nodes initially in Q (unvisited nodes)</span><br><span class="line"> 9</span><br><span class="line">10      dist[source] ← 0                        // Distance from source to source</span><br><span class="line">11      </span><br><span class="line">12      while Q is not empty:</span><br><span class="line">13          u ← vertex in Q with min dist[u]    // Node with the least distance</span><br><span class="line">14                                                      // will be selected first</span><br><span class="line">15          remove u from Q </span><br><span class="line">16          </span><br><span class="line">17          for each neighbor v of u:           // where v is still in Q.</span><br><span class="line">18              alt ← dist[u] + length(u, v)</span><br><span class="line">19              if alt &lt; dist[v]:               // A shorter path to v has been found</span><br><span class="line">20                  dist[v] ← alt </span><br><span class="line">21                  prev[v] ← u </span><br><span class="line">22</span><br><span class="line">23      return dist[], prev[]</span><br></pre></td></tr></table></figure></p>
<p>Like the BFS, Dijkstra’s algorithm examines an awful lot of edges. Wouldn’t it be great if the algorithm could be given hints as it progresses to nudge the search along in the correct direction? Well, luckily for us, this is possible. Let’s welcome AStar.</p>
<h2 id="AStar"><a href="#AStar" class="headerlink" title="AStar"></a>AStar</h2><p>Dijkstra’s algorithm searches by minimizing the cost of the path so far. It can be improved significantly by taking into account, when putting nodes on the frontier, an estimate of the cost to the target from each node under consideration. This estimate is usually referred to as a heuristic, and the name given to the algorithm that uses this method of heuristically directed search is A* (pronounced ay-star). And jolly good it is too!</p>
<p>If the heuristic used by the algorithm gives the lower bound on the actual cost (underestimates the cost) from any node to the target, then A* is guaranteed to give optimal paths. For graphs that contain spatial informa- tion, such as navigation graphs, there are several heuristic functions you can use, the most straightforward being the straight-line distance between the nodes in question. This is sometimes referred to as the Euclidean distance.</p>
<p>A* proceeds in an almost identical fashion to Dijkstra’s search algo- rithm. The only difference is in the calculation of the costs of the nodes on the search frontier. The adjusted cost, F, to the node when positioned on the priority queue (the search frontier), is calculated as:</p>
<p><em>F</em> = <em>G</em> + <em>H</em></p>
<p>where G is the cumulative cost to reach a node and H is the heuristic esti- mate of the distance to the target.</p>
<p><strong>Pseudocode</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">function A*(start,goal)</span><br><span class="line">    closedset := the empty set                 //已经被估算的节点集合</span><br><span class="line">    openset := set containing the initial node //将要被估算的节点集合，初始只包含start</span><br><span class="line">    came_from := empty map</span><br><span class="line">    g_score[start] := 0                        //g(n)</span><br><span class="line">    h_score[start] := heuristic_estimate_of_distance(start, goal)    //通过估计函数 估计h(start)</span><br><span class="line">    f_score[start] := h_score[start]            //f(n)=h(n)+g(n)，由于g(n)=0，所以省略</span><br><span class="line">    while openset is not empty                 //当将被估算的节点存在时，执行循环</span><br><span class="line">        x := the node in openset having the lowest f_score[] value   //在将被估计的集合中找到f(x)最小的节点</span><br><span class="line">        if x = goal            //若x为终点，执行</span><br><span class="line">            return reconstruct_path(came_from,goal)   //返回到x的最佳路径</span><br><span class="line">        remove x from openset      //将x节点从将被估算的节点中删除</span><br><span class="line">        add x to closedset      //将x节点插入已经被估算的节点</span><br><span class="line">        for each y in neighbor_nodes(x)  //循环遍历与x相邻节点</span><br><span class="line">            if y in closedset           //若y已被估值，跳过</span><br><span class="line">                continue</span><br><span class="line">            tentative_g_score := g_score[x] + dist_between(x,y)    //从起点到节点y的距离</span><br><span class="line"></span><br><span class="line">            if y not in openset          //若y不是将被估算的节点</span><br><span class="line">                add y to openset         //将y插入将被估算的节点中</span><br><span class="line">                tentative_is_better := true     //暂时判断为更好</span><br><span class="line">            elseif tentative_g_score &lt; g_score[y]         //如果起点到y的距离小于y的实际距离</span><br><span class="line">                tentative_is_better := true         //暂时判断为更好</span><br><span class="line">            else</span><br><span class="line">                tentative_is_better := false           //否则判断为更差</span><br><span class="line">            if tentative_is_better = true            //如果判断为更好</span><br><span class="line">                came_from[y] := x                  //将y设为x的子节点</span><br><span class="line">                g_score[y] := tentative_g_score    //更新y到原点的距离</span><br><span class="line">                h_score[y] := heuristic_estimate_of_distance(y, goal) //估计y到终点的距离</span><br><span class="line">                f_score[y] := g_score[y] + h_score[y]</span><br><span class="line">    return failure</span><br><span class="line"></span><br><span class="line">function reconstruct_path(came_from,current_node)</span><br><span class="line">    if came_from[current_node] is set</span><br><span class="line">        p = reconstruct_path(came_from,came_from[current_node])</span><br><span class="line">        return (p + current_node)</span><br><span class="line">    else</span><br><span class="line">        return current_node</span><br></pre></td></tr></table></figure></p>
<p>AStar allows us to find a path from source to target in a relatively short time. And it’s also the most commonly used algorithm in game ai.</p>
<p>In practice, we can use different heuristics to represent different cost. For example, in a 4-connected grid map, it’s better to use manhattan heuristic. In a thief topic game, you need to use a heuristic considering the sound made by the move. Here is a link about <a href="https://stackoverflow.com/questions/43906669/a-with-manhattan-distance-or-euclidean-distance-for-maze-solving" target="_blank" rel="noopener">the difference between Euclidean and Manhattan</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Game/" rel="tag"># Game</a>
          
            <a href="/tags/Artificial-Intelligence/" rel="tag"># Artificial Intelligence</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/22/Unity-Shader-Chapter-8/" rel="next" title="Unity Shader Chapter 8">
                <i class="fa fa-chevron-left"></i> Unity Shader Chapter 8
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/07/Maze-Generating-Algorithm/" rel="prev" title="Maze Generating Algorithm">
                Maze Generating Algorithm <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Chang Lin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/lc1995" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:lucianolin1995@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Graph"><span class="nav-number">1.</span> <span class="nav-text">Graph</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-1-Navigation"><span class="nav-number">1.1.</span> <span class="nav-text">Example 1 : Navigation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-2-Dependency-Graph"><span class="nav-number">1.2.</span> <span class="nav-text">Example 2 : Dependency Graph</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Graph-Search"><span class="nav-number">2.</span> <span class="nav-text">Graph Search</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Depth-First-Search"><span class="nav-number">2.1.</span> <span class="nav-text">Depth First Search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Breadth-First-Search"><span class="nav-number">2.2.</span> <span class="nav-text">Breadth First Search</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dijkstra"><span class="nav-number">2.3.</span> <span class="nav-text">Dijkstra</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AStar"><span class="nav-number">2.4.</span> <span class="nav-text">AStar</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chang Lin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: window.location.pathname, 
            owner: 'lc1995',
            repo: 'lc1995.github.io',
            
            lang: "" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: 'f8c2095d8dc16bb768802ae8cbd0e7917eb7cb4a',
            
                client_id: 'ce5223552f85fd516b62'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
